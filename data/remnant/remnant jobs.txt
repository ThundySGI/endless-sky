# Copyright (c) 2017 by Michael Zahniser
# Copyright (c) 2018 by Zitchas
# Copyright (c) 2022 by williaji
#
# Endless Sky is free software: you can redistribute it and/or modify it under the
# terms of the GNU General Public License as published by the Free Software
# Foundation, either version 3 of the License, or (at your option) any later version.
#
# Endless Sky is distributed in the hope that it will be useful, but WITHOUT ANY
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE. See the GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <https://www.gnu.org/licenses/>.

mission "Remnant: Bounty"
	job
	repeat
	name "<NM-848>"
	description "<DS-3197>"
	source
		government "Remnant"
	to offer
		has "Remnant: Defense 2: done"
		or
			not "remnant: ssil vida active"
			not "flagship planet: Ssil Vida"
		random < 60
	npc kill
		government "Korath"
		personality coward target uninterested marked waiting
		system
			distance 1 2
		fleet
			names "korath"
			cargo 3
			commodities "Food" "Clothing" "Metal" "Plastic" "Medical" "Heavy Metals"
			variant
				"Palavret (Crippled)"
		dialog "<DL-695>"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 300000
		dialog "<DL-696>"



mission "Remnant: Bounty 2"
	job
	repeat
	name "<NM-849>"
	description "<DS-3198>"
	source
		government "Remnant"
	to offer
		has "Remnant: Salvage 4: offered"
		or
			not "remnant: ssil vida active"
			not "flagship planet: Ssil Vida"
		random < 50
	npc kill
		government "Korath"
		personality heroic vindictive target uninterested waiting marked
		system
			distance 1 2
		fleet
			names "korath"
			cargo 3
			commodities "Food" "Clothing" "Metal" "Plastic" "Medical" "Heavy Metals"
			variant
				"Palavret (Hyperdrive)"
		dialog "<DL-695>"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 400000
		dialog "<DL-697>"



mission "Remnant: Broken Jump Drive job"
	name "<NM-797>"
	description "<DS-3199>"
	job
	repeat 4
	to offer
		has "Remnant: Broken Jump Drive 5: done"
		or
			not "remnant: ssil vida active"
			not "flagship planet: Ssil Vida"
			
	source
		government "Remnant"
	destination
		government "Remnant"
		attributes outfitter
		not attributes "remnant station"
		not distance 0
	on visit
		dialog phrase "broken jump drive on visit"
	on complete
		outfit "Jump Drive (Broken)" -1
		"remnant: broken jump drive count" ++
		payment 300000
		"reputation: Remnant" ++
		"Remnant: Broken Jump Drive job: offered" --
		dialog "<DL-698>"



mission "Remnant: Expanded Horizons Astral job"
	job
	repeat
	name "<NM-850>"
	description "<DS-3200>"
	source
		government "Remnant"
	waypoint
		not attributes "pleiades"
		not attributes "inaccessible"
		not attributes "tangled shroud"
		not attributes "twilight"
		not attributes "outer limits"
		not attributes "beyond patir"
	to offer
		has "Remnant: Expanded Horizons Astral 2: done"
		random < 50
	on offer
		require "Research Laboratory"
	on waypoint
		dialog "<DL-699>"
	on complete
		payment 500000
		"reputation: Remnant" ++
		dialog "<DL-700>"



mission "Remnant: Bounty 3"
	job
	repeat
	name "<NM-851>"
	description "<DS-3201>"
	source
		government "Remnant"
	to offer
		# 0.9.13 Compatibility patch
		or
			has "Remnant: Cognizance 4: done"
			has "Remnant: Cognizance 4: failed"
		not "Remnant: Cognizance 4: aborted"
		random < 40
	npc kill
		government "Korath"
		personality heroic vindictive target uninterested waiting marked
		system
			distance 1 2
		fleet
			names "korath"
			cargo 3
			commodities "Food" "Clothing" "Metal" "Plastic" "Medical" "Heavy Metals"
			variant
				"Rano'erek (Crippled)"
		dialog "<DL-695>"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 400000
		dialog "<DL-697>"



mission "Remnant: Bounty 4"
	job
	repeat
	name "<NM-852>"
	description "<DS-3202>"
	source
		government "Remnant"
	to offer
		has "Remnant: Cognizance 14: done"
		random < 30
	npc kill
		government "Korath"
		personality heroic vindictive target uninterested waiting marked
		system
			distance 1 2
		fleet
			names "korath"
			cargo 3
			commodities "Food" "Clothing" "Metal" "Plastic" "Medical" "Heavy Metals"
			variant
				"Rano'erek (Crippled)"
		dialog "<DL-695>"
	on visit
		dialog phrase "generic bounty hunting on visit"
	on complete
		payment 500000
		dialog "<DL-697>"



mission "Remnant: Bounty 5"
	job
	repeat
	name "<NM-853>"
	description "<DS-3203>"
	source
		government "Remnant"
	to offer
		has "Remnant: Cognizance 29: done"
		or
			not "remnant: ssil vida active"
			not "flagship planet: Ssil Vida"
		random < 5
	npc kill
		government "Korath"
		personality heroic vindictive target marked staying
		system
			attributes "ember waste"
			not attributes "graveyard"
			not attributes "inaccessible"
			not attributes "twilight"
		fleet
			names "korath"
			cargo 3
			commodities "Food" "Clothing" "Metal" "Plastic" "Medical" "Heavy Metals"
			variant
				"Rano'erek (Ground Assault)"
				"'olofez" 4
		dialog "<DL-701>"
	on visit
		dialog "<DL-702>"
	on complete
		payment 400000
		dialog "<DL-703>"



mission "Remnant: Logistics Civil Engineering"
	name "<NM-854>"
	description `<DS-3204>`
	cargo "remnant civil" 20 4 .1
	job
	repeat
	to offer
		not "remnant: ssil vida active"
		has "Remnant: Logistics 1: done"
		random < 51
	source
		government "Remnant"
		not planet "Ssil Vida"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		dialog `<DL-704>`
		payment
		payment 10000



mission "Remnant: Logistics Industrial Delivery"
	name "<NM-855>"
	description `<DS-3205>`
	cargo "remnant industrial" 20 4 .03
	job
	repeat
	to offer
		not "remnant: ssil vida active"
		has "Remnant: Logistics 1: done"
		"Remnant: Logistics Civil Engineering: done" >= 9
		random < 76
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		dialog `<DL-705>`
		payment
		payment 15000



mission "Remnant: Logistics Outfitter Delivery"
	name "<NM-856>"
	description `<DS-3206>`
	cargo "remnant outfitter repair" 20 3 .04
	job
	repeat
	to offer
		not "remnant: ssil vida active"
		has "Remnant: Logistics 1: done"
		has "license: Remnant"
		"Remnant: Logistics Industrial Delivery: done" >= 9
		random < 30
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		dialog `<DL-706>`
		payment
		payment 30000



mission "Remnant: Logistics Salvage Delivery"
	name "<NM-857>"
	description `<DS-3207>`
	cargo "remnant salvage" 5 4 .06
	job
	repeat
	to offer
		not "remnant: ssil vida active"
		has "Remnant: Logistics 1: done"
		has "license: Remnant Capital"
		"Remnant: Logistics Outfitter Delivery: done" >= 9
		random < 11
	source
		government "Remnant"
	destination
		government "Remnant"
		not distance 0
		not planet "Ssil Vida"
		not planet "Esquiline"
	on visit
		dialog phrase "generic cargo on visit"
	on complete
		dialog `<DL-707>`
		payment 25000 300



mission "Remnant: Rescue"
	job
	repeat
	name "<NM-858>"
	description "<DS-3208>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 10
	npc accompany save
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality derelict timid plunders
		government "Remnant"
		fleet
			names "remnant"
			variant
				Starling
			variant
				Gull
	on complete
		"remnant: rescue missions" ++
		payment 200000
		dialog
			`<CN-17204>`
	on visit
		dialog
			`<CN-17205>`



# The Rescue Dummy is meant to commit suicide as soon as possible on entering the randomized system.
ship "Rescue Dummy"
	# sprite "ship/behemoth"
	attributes
		category "Game Mechanics"
		"heat dissipation" 1
		"hull" 1
		"mass" 10
		"drag" 1
		"automaton" 1
		"energy generation" 1
		"thrust" 30
		"turn" 30
	outfits
		"Suicide Gun"
	gun 0 0

outfit "Suicide Gun"
	category "Guns"
	thumbnail "outfit/unknown"
	"gun ports" -1
	weapon
		velocity 100
		lifetime 10
		reload 1
		"blast radius" 900
		"shield damage" 0.01
		"hull damage" 1



mission "Remnant: Rescue 1B"
	job
	repeat
	name "<NM-858>"
	description "<DS-3208>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 1
	npc kill
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality staying heroic nemesis unconstrained
		government "Test Dummy"
		fleet
			names "remnant"
			variant
				"Rescue Dummy"
		dialog
			`<CN-17206>`
	on complete
		"remnant: rescue missions" ++
		payment 200000
		dialog
			`<CN-17207>`
	on visit
		dialog
			`<CN-17205>`



mission "Remnant: Rescue 2"
	job
	repeat
	name "<NM-859>"
	description "<DS-3209>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 10
	npc accompany save
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality derelict timid plunders
		government "Remnant"
		fleet
			names "remnant"
			variant 7
				Gull
			variant 3
				Starling
			variant 3
				Pelican
	on complete
		"remnant: rescue missions" ++
		payment 300000
		dialog
			`<CN-17208>`
	on visit
		dialog
			`<CN-17205>`



mission "Remnant: Rescue 2B"
	job
	repeat
	name "<NM-859>"
	description "<DS-3209>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 3
	npc kill
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality staying heroic nemesis unconstrained
		government "Test Dummy"
		fleet
			names "remnant"
			variant
				"Rescue Dummy"
		dialog
			`<CN-17206>`
	on complete
		"remnant: rescue missions" ++
		payment 300000
		dialog
			`<CN-17207>`
	on visit
		dialog
			`<CN-17205>`



mission "Remnant: Rescue 3"
	job
	repeat
	name "<NM-860>"
	description "<DS-3210>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 10
	npc accompany save
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality derelict timid plunders
		government "Remnant"
		fleet
			names "remnant"
			variant 7
				Pelican
			variant 2
				Gull
	on complete
		"remnant: rescue missions" ++
		payment 300000
		dialog
			`<CN-17209>`
	on visit
		dialog
			`<CN-17205>`



mission "Remnant: Rescue 3B"
	job
	repeat
	name "<NM-860>"
	description "<DS-3210>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 3
	npc kill
		system
			attributes "ember waste"
			not attributes "ka'het"
			not attributes "inaccessible"
			not attributes "graveyard"
			not government "Remnant"
			not near "Arculus" 3
			near "Arculus" 30
				"all wormholes"
		personality staying heroic nemesis unconstrained
		government "Test Dummy"
		fleet
			names "remnant"
			variant
				"Rescue Dummy"
		dialog
			`<CN-17206>`
	on complete
		"remnant: rescue missions" ++
		payment 300000
		dialog
			`<CN-17207>`
	on visit
		dialog
			`<CN-17205>`



mission "Remnant: Rescue 4"
	job
	repeat
	name "<NM-861>"
	description "<DS-3211>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		has "First Contact: Ka'het: Remnant 1B: offered"
		random < 10
	npc accompany save
		system
			attributes "graveyard"
			not government "Remnant"
			near "Nona" 20
				"only unrestricted wormholes"
		personality escort derelict heroic plunders
		government "Remnant"
		fleet
			names "remnant"
			variant 8
				Albatross
			variant 2
				Ibis
	on complete
		"remnant: rescue missions" ++
		payment 500000
		dialog
			`<CN-17210>`
			`<CN-17211>`
	on visit
		dialog
			`<CN-17212>`



mission "Remnant: Rescue 5"
	job
	repeat
	name "<NM-862>"
	description "<DS-3212>"
	source
		government "Remnant"
	to offer
		has "Remnant: Learn Sign Follow Up: offered"
		random < 10
	npc accompany save
		system
			near "Terminus" 2
		personality derelict timid plunders
		government "Remnant"
		fleet
			names "remnant"
			variant 6
				Gull
			variant 3
				Starling
	on complete
		"remnant: rescue missions" ++
		payment 500000
		dialog
			`<CN-17213>`
	on visit
		dialog
			`<CN-17214>`


mission "Remnant: Disable 1"
	job
	repeat
	name "<NM-863>"
	description "<DS-3213>"
	source
		government "Remnant"
	to offer
		has "Remnant: Will Not Someone Please Think Of The Children: done"
		not "Remnant: Disable 1: aborted"
		not "Remnant: Disable 1: failed"
		random < 5
	npc disable save
		government "Korath"
		personality heroic target marked staying disables plunders
		system
			near "Vaticanus" 1
		fleet
			names "korath"
			variant
				"Kas'lor Ik 582 (Stranded)"
		dialog `<DL-691>`
	on visit
		dialog `<DL-708>`
	on abort
		dialog `<DL-709>`
	on fail
		"reputation: Remnant" -= 250
		dialog `<DL-694>`
	on complete
		"remnant: disable and save count" ++
		payment 2000000
		dialog "<DL-710>"
